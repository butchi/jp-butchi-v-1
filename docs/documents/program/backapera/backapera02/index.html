<!doctype html>
<html>
<head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-15HC91J6CW"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-15HC91J6CW');
</script>
<meta charset="utf-8">
<title>backapera demo</title>
<style>
html, body {
  height: 100%;
  margin: 0;
  pading: 0;
  overflow: hidden;
}

.slide {
  position: absolute;
  left: 0px;
  width: 100%;
  height: 100%;
  padding: 0px;
  font-size: 120px;
}

#s1 {
  background-color: #F99;
}
#s2 {
  background-color: #9F9;
}
#s3 {
  background-color: #99F;
}
#s4 {
  background-color: #FF9;
}
#s5 {
  background-color: #F9F;
}


</style>
</head>

<body>
<div class="slide" id="s5">「戻る」<!--またはタップ-->で終了</div>
<div class="slide" id="s4">History APIと組み合わせるとさらに表現力が増えます。</div>
<div class="slide" id="s3">onhashchangeイベントを検知してページを遷移しています。</div>
<div class="slide" id="s2">これはbackaperaのデモです。</div>
<div class="slide" id="s1">「戻る」で次のページへ。</div>

<script src="lib/jquery-1.8.2.min.js"></script>
<script src="lib/jquery.easing.1.3.js"></script>
<script>
var len = document.getElementsByClassName('slide').length-1;
setTimeout(changeHash, 0);

/*
$('#s5').bind('click', function(){
  console.log('hoeg');
  window.close();
});
*/

function changeHash() {
  var i;
  for(i=len-1; i>=0; i--) {
    location.hash = '#a'+i;
  }
  setTimeout(setHashHandler, 0);
}

function setHashHandler() {
  onhashchange = function() {
    console.log(location.hash);
    if(location.hash=='') {
      var page = len;
    } else {
      var page = ~~location.hash.slice(2);
    }
    var style = getComputedStyle(document.body, '');
    var w = parseInt(style.width,10);
    $('#s'+page).animate({left:w+'px'},1000, 'easeOutCubic');
  }
}

</script>
</body>
</html>
